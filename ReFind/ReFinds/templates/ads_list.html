<!DOCTYPE html>
{% load static %}
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <title>–í—Å–∏—á–∫–∏ –æ–±—è–≤–∏ ‚Äì ReFinder</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{% static 'listing.css' %}">
</head>
<body class="bg-[#213A58] text-white min-h-screen flex flex-col">

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
  <nav class="flex justify-between items-center px-6 py-4 bg-[#0C6478] shadow-md">
    <div class="flex items-center gap-2">
      <img src="{% static 'logo-removebg-preview.png' %}" alt="ReFinder Logo" class="h-10">
      <span class="text-xl font-bold text-[#80EE98]">ReFinder</span>
    </div>
    <div class="space-x-4 text-sm font-semibold">
      <a href="{% url 'home' %}" class="hover:text-[#80EE98]">–ù–∞—á–∞–ª–æ</a>
      <a href="{% url 'chat_list' %}" class="hover:text-[#80EE98]">–ß–∞—Ç–æ–≤–µ</a>
      <a href="{% url 'listing' %}" class="hover:text-[#80EE98]">–î–æ–±–∞–≤–∏</a>
      <a href="{% url 'ad_list' %}" class="hover:text-[#80EE98]">–û–±—è–≤–∏</a>
      <a href="{% url 'image_search' %}" class="hover:text-[#80EE98]" >–°—Ä–∞–≤–Ω–µ–Ω–∏–µ</a>
      <a href="{% url 'logout' %}" class="hover:text-[#80EE98]">–ò–∑—Ö–æ–¥</a>
    </div>
  </nav>

  <!-- –ó–∞–≥–ª–∞–≤–∏–µ –∏ —Ç—ä—Ä—Å–µ–Ω–µ -->
  <div class="px-6 py-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
    <h1 class="text-3xl font-bold text-[#80EE98] drop-shadow">üìã –í—Å–∏—á–∫–∏ –æ–±—è–≤–∏</h1>

    <form method="GET" class="flex gap-2">
      <input type="text" name="q" placeholder="üîç –¢—ä—Ä—Å–∏ –ø–æ –∑–∞–≥–ª–∞–≤–∏–µ..." class="px-4 py-2 rounded-xl bg-white text-black placeholder-gray-500 w-64">
        <select name="status" class="px-3 py-2 rounded-xl bg-white text-black">
          <option value="" {% if not selected_status %}selected{% endif %}>–í—Å–∏—á–∫–∏</option>
          <option value="lost" {% if selected_status == "lost" %}selected{% endif %}>–ò–∑–≥—É–±–µ–Ω–∏</option>
          <option value="found" {% if selected_status == "found" %}selected{% endif %}>–ù–∞–º–µ—Ä–µ–Ω–∏</option>
        
        
      </select>
      <button type="submit" class="bg-[#80EE98] text-[#213A58] px-4 py-2 rounded-xl font-bold hover:bg-[#5ee180] transition">–§–∏–ª—Ç—Ä–∏—Ä–∞–π</button>
    </form>
  </div>

  <!-- –°–ø–∏—Å—ä–∫ —Å –æ–±—è–≤–∏ -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 px-6 pb-10 overflow-y-auto">
    {% for ad in ads %}
      <a href="{% url 'ad_detail' ad.id %}" class="block bg-[#0C6478]/80 backdrop-blur-md p-4 rounded-2xl shadow-xl hover:shadow-2xl hover:bg-[#15919B]/80 transition-all duration-300 border border-transparent hover:border-[#80EE98]">

        <!-- –°—Ç–∞—Ç—É—Å –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª -->
        <div class="flex justify-between items-center text-xs text-gray-300 mb-2">
          <span>
            {% if ad.status == 'lost' %}
              üõë <span class="text-red-400 font-semibold">–ò–∑–≥—É–±–µ–Ω–æ</span>
            {% elif ad.status == 'found' %}
              ‚úÖ <span class="text-green-400 font-semibold">–ù–∞–º–µ—Ä–µ–Ω–æ</span>
            {% else %}
              üì¶ –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
            {% endif %}
          </span>
          <span>üë§ {{ ad.user.username|default:"–Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω" }}</span>
        </div>

        {% if ad.image %}
          <img src="{{ ad.image.url }}" alt="Ad Image" class="w-full h-48 object-cover rounded-xl mb-4 shadow-sm">
        {% endif %}

        <h2 class="text-xl font-bold text-[#80EE98]">{{ ad.title }}</h2>
        <p class="text-sm text-gray-200 line-clamp-3">{{ ad.description }}</p>
        <p class="text-sm mt-2">üìç {{ ad.location }}</p>
        <p class="text-xs text-gray-400">üïí {{ ad.created_at|date:"d.m.Y H:i" }}</p>
      </a>
    {% empty %}
      <p class="text-center col-span-3 text-[#80EE98] text-lg font-semibold">–í—Å–µ –æ—â–µ –Ω—è–º–∞ –ø—É–±–ª–∏–∫—É–≤–∞–Ω–∏ –æ–±—è–≤–∏.</p>
    {% endfor %}
  </div>

</body>
</html>
